{"version":3,"sources":["file:///D:/yyx/cocos-airplane/assets/script/framework/GameManager.ts"],"names":["_decorator","Component","Node","Prefab","instantiate","ccclass","property","GameManager","_currShootTime","_isShooting","start","_init","update","deltaTime","shootTime","createBullet","bullet","bullet01","setParent","bulletRoot","pos","playerPlane","position","setPosition","x","y","z","isShooting","value"],"mappings":";;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;;;;;;;OAExC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;6BAGjBO,W,WADZF,OAAO,CAAC,aAAD,C,UAELC,QAAQ,CAACJ,IAAD,C,UAERI,QAAQ,CAACH,MAAD,C,UAERG,QAAQ,CAACH,MAAD,C,UAERG,QAAQ,CAACH,MAAD,C,UAERG,QAAQ,CAACH,MAAD,C,UAERG,QAAQ,CAACH,MAAD,C,UAQRG,QAAQ,CAACJ,IAAD,C,2BApBX,MACaK,WADb,SACiCN,SADjC,CAC2C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAqBjCO,cArBiC,GAqBhB,CArBgB;AAAA,eAsBjCC,WAtBiC,GAsBnB,KAtBmB;AAAA;;AAwBzCC,QAAAA,KAAK,GAAG;AACN,eAAKC,KAAL;AACD;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACxB,eAAKL,cAAL,IAAuBK,SAAvB;;AACA,cAAG,KAAKJ,WAAL,IAAoB,KAAKD,cAAL,GAAoB,KAAKM,SAAhD,EAA0D;AACxD,iBAAKC,YAAL,GADwD,CACpC;;AACpB,iBAAKP,cAAL,GAAsB,CAAtB;AACD;AACF;;AAEMO,QAAAA,YAAY,GAAE;AACnB;AACA,cAAMC,MAAM,GAAGZ,WAAW,CAAC,KAAKa,QAAN,CAA1B,CAFmB,CAGnB;;AACAD,UAAAA,MAAM,CAACE,SAAP,CAAiB,KAAKC,UAAtB,EAJmB,CAKnB;;AACA,cAAMC,GAAG,GAAG,KAAKC,WAAL,CAAiBC,QAA7B;AACAN,UAAAA,MAAM,CAACO,WAAP,CAAmBH,GAAG,CAACI,CAAvB,EAAyBJ,GAAG,CAACK,CAA7B,EAA+BL,GAAG,CAACM,CAAJ,GAAM,CAArC,EAPmB,CAQnB;AACA;AAED;;AACOf,QAAAA,KAAK,GAAE;AACb,eAAKH,cAAL,GAAsB,KAAKM,SAA3B,CADa,CACwB;AACtC,SAlDwC,CAoDzC;;;AACOa,QAAAA,UAAU,CAACC,KAAD,EAAe;AAC9B,eAAKnB,WAAL,GAAmBmB,KAAnB;AACD;;AAvDwC,O;;;;;iBAEd,I;;;;;;;iBAED,I;;;;;;;iBAEA,I;;;;;;;iBAEA,I;;;;;;;iBAEA,I;;;;;;;iBAEA,I;;oFAEzBtB,Q;;;;;iBACkB,G;;sFAClBA,Q;;;;;iBACoB,C;;;;;;;iBAGK,I","sourcesContent":["import { _decorator, Component, Node, Prefab, instantiate } from \"cc\";\nimport { Bullet } from \"../bullet/Bullet\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"GameManager\")\nexport class GameManager extends Component {\n  @property(Node)\n  public playerPlane: Node = null  //玩家飞机\n  @property(Prefab)\n  public bullet01: Prefab = null //子弹\n  @property(Prefab)\n  public bullet02: Prefab = null //子弹\n  @property(Prefab)\n  public bullet03: Prefab = null //子弹\n  @property(Prefab)\n  public bullet04: Prefab = null //子弹\n  @property(Prefab)\n  public bullet05: Prefab = null //子弹\n\n  @property\n  public shootTime = 0.3\n  @property\n  public bulletSpeed = 1\n\n  @property(Node)\n  public bulletRoot: Node = null  //管理所有子弹的节点\n  private _currShootTime = 0 //当前触摸时间\n  private _isShooting = false\n\n  start() {\n    this._init()\n  }\n\n  update(deltaTime: number) {\n    this._currShootTime += deltaTime\n    if(this._isShooting && this._currShootTime>this.shootTime){\n      this.createBullet() // 创建子弹\n      this._currShootTime = 0\n    }\n  }\n\n  public createBullet(){\n    // 创建预制需要先实例\n    const bullet = instantiate(this.bullet01)\n    // 实例化后的预制并不在场景 需要setParent\n    bullet.setParent(this.bulletRoot)\n    // 设置子弹位置 （相对飞机位置）\n    const pos = this.playerPlane.position\n    bullet.setPosition(pos.x,pos.y,pos.z+6)\n    // const bulletComp = bullet.getComponent(Bullet)\n    // bulletComp.bulletSpeed = this.bulletSpeed\n\n  }\n  private _init(){\n    this._currShootTime = this.shootTime //默认开始发射一颗\n  }\n\n  // 判断是否触摸 才发射\n  public isShooting(value:boolean){\n    this._isShooting = value\n  }\n}\n"]}