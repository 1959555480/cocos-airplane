{"version":3,"sources":["file:///D:/yyx/cocos-airplane/assets/script/framework/GameManager.ts"],"names":["_decorator","Component","Node","Prefab","instantiate","Bullet","ccclass","property","GameManager","_currShootTime","_isShooting","start","_init","update","deltaTime","shootTime","createBullet","console","log","bullet","bullet01","setParent","bulletRoot","pos","playerPlane","position","setPosition","x","y","z","bulletComp","getComponent","bulletSpeed","isShooting","value"],"mappings":";;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;;AACrCC,MAAAA,M,iBAAAA,M;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;6BAGjBQ,W,WADZF,OAAO,CAAC,aAAD,C,UAELC,QAAQ,CAACL,IAAD,C,UAERK,QAAQ,CAACJ,MAAD,C,UAERI,QAAQ,CAACJ,MAAD,C,UAERI,QAAQ,CAACJ,MAAD,C,UAERI,QAAQ,CAACJ,MAAD,C,UAERI,QAAQ,CAACJ,MAAD,C,UAQRI,QAAQ,CAACL,IAAD,C,2BApBX,MACaM,WADb,SACiCP,SADjC,CAC2C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAqBjCQ,cArBiC,GAqBhB,CArBgB;AAAA,eAsBjCC,WAtBiC,GAsBnB,KAtBmB;AAAA;;AAwBzCC,QAAAA,KAAK,GAAG;AACN,eAAKC,KAAL;AACD;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACxB,eAAKL,cAAL,IAAuBK,SAAvB;;AACA,cAAG,KAAKJ,WAAL,IAAoB,KAAKD,cAAL,GAAoB,KAAKM,SAAhD,EAA0D;AACxD,iBAAKC,YAAL,GADwD,CACpC;;AACpBC,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,iBAAKT,cAAL,GAAsB,CAAtB;AACD;AACF;;AAEMO,QAAAA,YAAY,GAAE;AACnB;AACA,gBAAMG,MAAM,GAAGf,WAAW,CAAC,KAAKgB,QAAN,CAA1B,CAFmB,CAGnB;;AACAD,UAAAA,MAAM,CAACE,SAAP,CAAiB,KAAKC,UAAtB,EAJmB,CAKnB;;AACA,gBAAMC,GAAG,GAAG,KAAKC,WAAL,CAAiBC,QAA7B;AACAN,UAAAA,MAAM,CAACO,WAAP,CAAmBH,GAAG,CAACI,CAAvB,EAAyBJ,GAAG,CAACK,CAA7B,EAA+BL,GAAG,CAACM,CAAJ,GAAM,GAArC;AACA,gBAAMC,UAAU,GAAGX,MAAM,CAACY,YAAP;AAAA;AAAA,+BAAnB;AACAd,UAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0B,KAAKc,WAA/B;AACAF,UAAAA,UAAU,CAACE,WAAX,GAAyB,KAAKA,WAA9B;AAED;;AACOpB,QAAAA,KAAK,GAAE;AACb,eAAKH,cAAL,GAAsB,KAAKM,SAA3B,CADa,CACwB;AACtC,SApDwC,CAsDzC;;;AACOkB,QAAAA,UAAU,CAACC,KAAD,EAAe;AAC9B,eAAKxB,WAAL,GAAmBwB,KAAnB;AACD;;AAzDwC,O;;;;;iBAEd,I;;;;;;;iBAED,I;;;;;;;iBAEA,I;;;;;;;iBAEA,I;;;;;;;iBAEA,I;;;;;;;iBAEA,I;;oFAEzB3B,Q;;;;;iBACkB,G;;sFAClBA,Q;;;;;iBACoB,C;;;;;;;iBAGK,I","sourcesContent":["import { _decorator, Component, Node, Prefab, instantiate } from \"cc\";\nimport { Bullet } from \"../bullet/Bullet\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"GameManager\")\nexport class GameManager extends Component {\n  @property(Node)\n  public playerPlane: Node = null  //玩家飞机\n  @property(Prefab)\n  public bullet01: Prefab = null //子弹\n  @property(Prefab)\n  public bullet02: Prefab = null //子弹\n  @property(Prefab)\n  public bullet03: Prefab = null //子弹\n  @property(Prefab)\n  public bullet04: Prefab = null //子弹\n  @property(Prefab)\n  public bullet05: Prefab = null //子弹\n\n  @property\n  public shootTime = 0.3\n  @property\n  public bulletSpeed = 1\n\n  @property(Node)\n  public bulletRoot: Node = null  //管理所有子弹的节点\n  private _currShootTime = 0 //当前触摸时间\n  private _isShooting = false\n\n  start() {\n    this._init()\n  }\n\n  update(deltaTime: number) {\n    this._currShootTime += deltaTime\n    if(this._isShooting && this._currShootTime>this.shootTime){\n      this.createBullet() // 创建子弹\n      console.log(\"创建子弹\")\n      this._currShootTime = 0\n    }\n  }\n\n  public createBullet(){\n    // 创建预制需要先实例\n    const bullet = instantiate(this.bullet01)\n    // 实例化后的预制并不在场景 需要setParent\n    bullet.setParent(this.bulletRoot)\n    // 设置子弹位置\n    const pos = this.playerPlane.position\n    bullet.setPosition(pos.x,pos.y,pos.z-1.3)\n    const bulletComp = bullet.getComponent(Bullet)\n    console.log(\"bulletSpeed\",this.bulletSpeed)\n    bulletComp.bulletSpeed = this.bulletSpeed\n\n  }\n  private _init(){\n    this._currShootTime = this.shootTime //默认开始发射一颗\n  }\n\n  // 判断是否触摸 才发射\n  public isShooting(value:boolean){\n    this._isShooting = value\n  }\n}\n"]}